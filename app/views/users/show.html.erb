<% provide(:title, @user.user_name) %>
<h3><%= @user.user_name %>の部屋</h3>

<!-- error -->
<div class="error_explanation">
  <% if notice %>
    <p class="alert alert-notice"><%= notice %></p>
  <% end %>
</div>

<div id="main">
  <div class="left">
    <!-- user_info -->
    <section class="user_info">
      <%= render partial:  'user_info_table', :locals => {:profile => @profile, :user => @user} %>
    </section>
    <!-- stats -->
    <section class="stats">
      <%= render 'stats' %>
    </section>
    <section class ="prfile-edit">
    <% if user_signed_in? && current_user.id == @user.id %>
      <div class="edit-profile-link">
        <%= link_to edit_profile_path, class: "btn-square", data: {"turbolinks" => false} do %>
          <i class="fab fa fa-edit"></i> プロフィール編集
        <% end %>
      </div>
      <div class="user-delete-link">
        <%= link_to registration_path(@user), class: "btn-square", method: :delete, data:
          { confirm: "本当に退会してよろしいですか？", cancel: 'キャンセル', commit: '退会する'}, title: '削除確認' do %>
          <i class="fas fa-user-slash"></i> 退会申請
        <% end %>
      </div>
    <% elsif current_user.admin?  %>
      <div class="user-delete-link">
        <%= link_to registration_path(@user), class: "btn-square", method: :delete, data: { confirm: "本当に退会させてもよろしいですか？" } do %>
          <i class="fas fa-user-slash"></i> 強制退会
        <% end %>
      </div>
    <% end %>
    </section>
  </div>
  <!-- feed -->
  <div class="right">
    <div id = "profile-photos">
      <%= render 'follow_form', user: @user %>
      <% if @user.posts.any? %>
        <%= render 'show_latest', group: @posts %>
      <% else %>
          投稿がありません
      <% end %>
    </div>
    <div class="show-latest-footer">
      <%= paginate @posts %>
    </div>
  </div>
</div>